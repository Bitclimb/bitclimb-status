'use strict';$(function(){function a(k,l,n){Highcharts.chart(k,{credits:{enabled:!1},title:{text:'Response Time last 24 hours ('+n+'ms avg.)'},legend:{align:'left',verticalAlign:'top',x:100,y:50,borderRadius:5,borderWidth:1,floating:!0},yAxis:{title:{text:'Response time(ms)'}},xAxis:{type:'datetime'},series:l})}function b(k,l,n){Highcharts.chart(k,{credits:{enabled:!1},chart:{type:'bar'},legend:{enabled:!1},title:{text:'Uptime'},plotOptions:{series:{shadow:!1,borderWidth:0,dataLabels:{enabled:!0,formatter:function formatter(){return Highcharts.numberFormat(this.y)+'%'}}}},yAxis:{ceiling:100,labels:{formatter:function formatter(){return Highcharts.numberFormat(this.value,0,',')+'%'}},title:{text:null}},xAxis:{categories:['24 hours','7 days','30 days'],title:{text:null}},series:[{data:l.map(function(o){return Number.parseFloat(o)}),name:n}]})}function c(k,l){$('ul.services').append('<li id="li-'+k.name.toLowerCase()+'">'+k.name.replace('_',' ')+'\n      <span class="tooltip" data-tip="Access to '+k.url+'">?</span>\n      <span class="status '+k.statusclass+'">'+k.status+'</span>\n      </li>'),$('#modals').append('\n        <div id="'+k.name.toLowerCase()+'" class="modal">\n          <div class="modal-content">\n            <span class="close">&times;</span>\n            <div class="container-fluid">\n              <div class="row">\n                <div class="column">\n                  <div class="row">\n                    <div id="chart-avg-'+k.name.toLowerCase()+'" style="width:100%; height:200px;"></div>\n                  </div>\n                  <div class="row">\n                  <div id="chart-'+k.name.toLowerCase()+'" style="width:100%; height:300px;"></div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      '),a('chart-'+k.name.toLowerCase(),l,k.avg),b('chart-avg-'+k.name.toLowerCase(),k.uptime,k.name.replace('_',' ')),$('#li-'+k.name.toLowerCase()).on('click',function(){var n=$('#'+k.name.toLowerCase());n.css('display','block'),n.find('.close').one('click',function(){n.css('display','none')})})}function d(k){$('ul.issues').append('<li>\n      <div class="txt-bold issues-date">'+k.created+'</div>\n      <div class="issues-title">['+k.label.toString()+'] '+k.title+'</div>\n      <div class="issues-body"><span class="txt-bold">Details: </span>'+k.body+'</div>\n      <div class="issues-body"><span class="txt-bold">Status: </span><span class="label-'+k.state+'">'+k.state+'</span></div>\n      </li>')}function e(){$.get('https://runkit.io/uniibu/bitclimb-status/1.0.2',function(k){localStorage.removeItem('status'),localStorage.setItem('lastupdate',Date.now()),localStorage.setItem('status',JSON.stringify(k)),h(k)})}function f(){$.get('https://api.github.com/repos/Bitclimb/bitclimb-status/issues?state=all',function(k){k=k.slice(0,10),localStorage.removeItem('issues'),localStorage.setItem('lastupdate',Date.now()),localStorage.setItem('issues',JSON.stringify(k)),g(k)})}function g(k){$('.cat-titles-issues').show(),$('.updatetime-issues').text('Updated '+moment(parseInt(localStorage.getItem('lastupdate'))).fromNow());var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var n,l=Object.values(k)[Symbol.iterator]();!(_iteratorNormalCompletion=(n=l.next()).done);_iteratorNormalCompletion=!0){var o=n.value,p={label:o.labels,title:o.title,body:o.body,state:o.state,created:moment(o.created_at).format('MMM D, YYYY')};d(p)}}catch(q){_didIteratorError=!0,_iteratorError=q}finally{try{!_iteratorNormalCompletion&&l.return&&l.return()}finally{if(_didIteratorError)throw _iteratorError}}}function h(k){$('.loader').hide(),$('.cat-titles-services').show(),$('.updatetime-services').text('Updated '+moment(parseInt(localStorage.getItem('lastupdate'))).fromNow());var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var n,l=Object.values(k)[Symbol.iterator]();!(_iteratorNormalCompletion2=(n=l.next()).done);_iteratorNormalCompletion2=!0){var o=n.value,p={};p.name=o.name,p.data=o.response_history.map(function(q){return[1e3*q.datetime,q.value]}).reverse(),c({name:o.name,url:o.url,status:o.status,statusclass:o.status.split(' ').shift().toLowerCase(),avg:o.response_avg,uptime:o.uptime},[p])}}catch(q){_didIteratorError2=!0,_iteratorError2=q}finally{try{!_iteratorNormalCompletion2&&l.return&&l.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}(function(){var k=JSON.parse(localStorage.getItem('status')),l=parseInt(localStorage.getItem('lastupdate'))||null;if(k&&l){var n=Date.now()-l;6e5<=n?e():h(k)}else e()})(),function(){var k=JSON.parse(localStorage.getItem('issues')),l=parseInt(localStorage.getItem('lastupdate'))||null;if(k&&l){var n=Date.now()-l;6e5<=n?f():g(k)}else f()}()});